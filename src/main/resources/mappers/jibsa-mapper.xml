<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="jibsaMapper">

	<insert id="insertJibsa">
		insert into jibsa
		VALUES (
		    #{memberNo},
		    #{jibsaGender},
		    #{jibsaRrn},
		    #{isSmoking},
		    #{workCareer},
		    systimestamp,
		    #{availableArea},
		    #{motive},
		    #{expectedSalary},
		    'kakao',
		    default,
		    sysdate,
		    sysdate,
		    'N'
		)
			
	
	</insert>
	
	<update id="updateMemberInfo">
		update member
		set member_email = #{memberEmail},
			member_phone = #{memberPhone}, member_address = #{memberAddress}
		where member_no = #{memberNo}
	</update>
	
	<update id="updateJibsaInfo">
		update jibsa
		set work_career = #{workCareer}, motive = #{motive},
			chat_address = #{chatAddress}
		where member_no = #{memberNo}
	</update>
	
	<update id="deleteJibsa">
		update member
		set is_jibsa = 'N'
		where member_no = #{memberNo}
	</update>
	
	<select id="selectJibsa" resultMap="jibsaResultSet">
		select *
		from jibsa
			 join member using(member_no)
		where member_no = #{memberNo}
	</select>
	
	<resultMap type="Jibsa" id="jibsaResultSet">
		<id column="MEMBER_NO" property="memberNo"/>
		<result column="MEMBER_NAME" property="memberName"/>
		<result column="JIBSA_GENDER" property="jibsaGender"/>
		<result column="JIBSA_RRN" property="jibsaRrn"/>
		<result column="IS_SMOKING" property="isSmoking"/>
		<result column="WORK_CAREER" property="workCareer"/>
		<result column="AVAILABLE_HOUR" property="availableHour"/>
		<result column="AVAILABLE_AREA" property="availableArea"/>
		<result column="MOTIVE" property="motive"/>
		<result column="EXPECTED_SALARY" property="expectedSalary"/>
		<result column="CHAT_ADDRESS" property="chatAddress"/>
		<result column="IS_PRIMIUM" property="isPrimium"/>
		<result column="PRIMIUM_PAYMENT_DATE" property="primiumPaymentDate"/>
		<result column="PRIMIUM_END_DATE" property="primiumEndDate"/>
		<result column="PRIMIUM_END_DATE" property="isTrainer"/>
		<result column="JIBSA_STATUS" property="jibsaStatus"/>
	</resultMap>
	
	<update id="updateJibsaAvailableHour">
		update jibsa
		set available_hour = #{availableHour}
		where member_no = #{memberNo}
	</update>
	
</mapper>